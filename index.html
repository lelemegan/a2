<!DOCTYPE html>
<html>
  <head>
    <title>Tiong Le Megan FIT3179 Assignment 2</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@2.1.0/build/pure-min.css" integrity="sha384-yHIFVG6ClnONEA5yB5DJXfW2/KC173DIQrYoZMEtBvGzmf0PKiGyNEqe9N6BNDBH" crossorigin="anonymous">

    <link rel="stylesheet" href="stylesheet.css"> 

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="icon" href="tab-logo.png">

</head>
  <body>
    <div class="first-container"> <!--tried adding pure-g here-->
        <div class="head-block"> <!--tried adding pure-u-5-5 here-->
            <h1>HOW MUCH IS 1GB OF DATA?</h1>
            <h4>Have you ever wondered how much is 1GB of data in the other side of the world?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
        <div class="head-block">
            <button onclick="navigateToAnchor('average_price_container')" class="pure-button">
                <i class="fa fa-chevron-down" aria-hidden="true"></i>        Let's See
            </button>
        </div>
    </div>
    <div id="average_price_container" class="second-container">
        <div class="block">
            <h3>Average Price</h3>
        </div>
        <div class="block-button">
            <button onclick="renderGraph(2019)" class="pure-button">
                2019
            </button>
            <button onclick="renderGraph(2020)" class="pure-button">
                2020
            </button>
            <button onclick="renderGraph(2021)" class="pure-button">
                2021
            </button>
            <button onclick="renderGraph(2022)" class="pure-button">
                2022
            </button>
            <h4>
                &nbsp;&nbsp;&nbsp;&nbsp;[<-- Click to filter]
            </h4>
        </div>
        <div class="vis-block">
            <div id="vis"></div>
        </div>
        <div class="block-world-map">
            <div id="first-para" class="paragraph">
                The average price of 1GB of data has gradually decreased over the years. According to research, data price deflation
                has been a norm for years. The price of 1GB of data falls each year and is not easily affected by other factors. The 
                reason for this is that while price of data is decreasing, demand for data has never ceased. Data usage has increased
                simultaneously over the years. 
            </div>
        </div>
        <div class="vis-block">
            <div id="vis_b"></div>
        </div>
        <div class="block-world-map">
            <div id="avg_price_description_2019" class="paragraph">
                In <b>2019</b>, we can see that <span class="highlight-lowest">Mayotte</span> has the lowest average price (of 1GB of data) of 0.22USD in the world
                while <span class="highlight-highest">Nicaragua</span> has the highest average price (of 1GB of data) of 65.83USD in the world. Mayotte continued
                to be the lowest the subsequent year. Following that, Mayotte dropped out of the lowest five category as 
                the price of data increased to 1.2USD. 
                <br>
            </div>
            <div id="avg_price_description_2020" class="paragraph">
                In 2020, <span class="highlight-lowest">Mayotte</span> was the country with lowest price (of 1GB of data) of 0.08USD only. The price of 1GB of data dropped 
                significantly by more than half compared to the previous year, 2019. On the other hand, <span class="highlight-highest">Saint Helena</span> has the average 
                most expensive price (of 1GB of data) of 52.5USD.
                <br>
            </div>
            <div id="avg_price_description_2021" class="paragraph">
                In 2021, <span class="highlight-lowest">Israel</span> has the average lowest price (of 1GB of data) of 0.05USD. Whereas, <span class="highlight-highest">Saint Helena</span> 
                continued to be the country with average highest price (of 1GB of data) of 41.06USD. Saint Helena has a significant decrease of more than 10USD. 
                <br>
            </div>
            <div id="avg_price_description_2022" class="paragraph">
                This year, up till July, <span class="highlight-lowest">Israel</span> remained in the category of average lowest price (of 1GB of data) with an even lower price 
                of 0.04USD while <span class="highlight-highest">Saint Helena</span> stayed as the country with average most expensive price (of 1GB of data) of 41.06USD, which is the same as the previous year, 2021. 
            </div>
            <br>
        </div>
        <button class="pure-button collapsible">
            <i class="fa fa-chevron-down" aria-hidden="true"></i>        Read More
        </button>
        <div class="content">
            <div class="sixth-container">
                <div id="vis_c"></div>
                <div class="paragraph">
                    We can see how far the lowest and highest price of 1GB of data is from the average price in the world. 
                    
                </div>
            </div>
        </div>
    </div>
    <div class="third-container parallax">
        <div class="third-block"> <!--tried adding pure-u-5-5 here-->
            <h1>HOW MANY INTERNET USERS ARE THERE IN THE WORLD?</h1>
            <h4>Have you ever wondered how many internet users are there in the world?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
    </div>
    <div class="fourth-container">
        <div class="block">
            <h3>Number of Internet Users</h3>
        </div>
        <div class="block">
            <div id="vis2"></div>
        </div>
        <div class="block-world-map">
            <div class="paragraph">
                It all started in Auguest 1991 where the first web page in the world went live. 
                In 1996, more and more variety of creations were introduced. One of it was a 
                social media called Six Degrees. Following that year, Wi-Fi was created and
                released for consumers. In 1998, Google went live, which brought an impact till 
                today on how we search for information online. 
                <br><br>
                In 2000, Baidu was invented while DotCom Bubble bursts (read more <a href="https://www.investopedia.com/terms/d/dotcom-bubble.asp">here</a>)
                In 2001, Wikipedia officially launched. Moving to 2003, Voice over Internet Protocol calling became user 
                friendly through the release of Skype. In 2004, the world stepped into Web 2.0 where
                we move towards the idea of "the Web as a platform". Besides that, Facebook launched in 2004 too. In 2005, 
                Youtube launched, providing anyone the chance to host videos online for free. In 2007, iPhone was invented, 
                bringing a whole new world to mobile web applications and design. 
                <br><br>
            </div>
        </div>
        <button class="pure-button collapsible">
            <i class="fa fa-chevron-down" aria-hidden="true"></i>        Read More
        </button>
        <div class="content">
            <div class="seventh-container">
                <div id="vis2_b"></div>
                <div class="paragraph">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec fermentum nibh id erat gravida, in porta elit mollis. 
                    Quisque in ligula mollis, rhoncus orci sit amet, hendrerit neque. Ut eu posuere augue. Nulla non lacus sem. Nullam 
                    non mauris neque. In hac habitasse platea dictumst. In pharetra eu odio ut rhoncus. Vestibulum non laoreet odio. 
                    Praesent venenatis egestas tristique. 
                    <br>
                    <br>
                    Nam feugiat velit ut bibendum laoreet. Proin sed quam magna. Fusce porttitor orci suscipit semper gravida. Phasellus 
                    ac erat sollicitudin, accumsan purus vitae, blandit ex. Nullam turpis turpis, tincidunt in lorem a, placerat feugiat 
                    ante. Nulla facilisi. Praesent lorem quam, gravida in tellus sollicitudin, blandit pretium enim.
                </div>
            </div>
        </div>
    </div>
    <div class="third-container">
        <div class="head-block"> <!--tried adding pure-u-5-5 here-->
            <h1>WHAT PERCENTAGE OF THE POPULATION ARE INTERNET USERS?</h1>
            <h4>Have you ever wondered what percentage of the population are internet users?
                Has there been more internet users? Which region is stagnant and which is not?
            </h4>
        </div>
    </div>
    <div class="fourth-container">
        <div class="block">
            <h3>Percentage of Internet Users</h3>
        </div>
        <div class="fifth-container">
            <div id="vis3"></div>
            <div class="paragraph">
                Over the years the percentage of internet users increased steadily. Until today, four continental regions 
                have a population of more than half that are internet users.  
                <br>
                <br>
                According to <a href="https://www.statista.com/statistics/617136/digital-population-worldwide/">Statista</a>, the global internet pentration rate is 62.5% now. 
            </div>
        </div>
        
    </div>
    <div class="last-container">
        <div class="last-block">
            <div class="last-paragraph">
                Tiong Le Megan | FIT3179 | 33332053
                <br>
                <br>
                <b>Datasource</b>
                <br>
                Price Dataset credits to <a href="https://www.cable.co.uk/">Cable CO UK</a>
                <br>
                Population in Numbers Dataset credits to <a href="https://data.worldbank.org/">Data World Bank</a>
                <br>
                Population in Percentage Dataset credits to <a href="https://data.worldbank.org/indicator/IT.NET.USER.ZS">Data World Bank</a>
            </div>
        </div>
    </div>
    </body>
    <script type="text/javascript">
      function navigateToAnchor(id){
        location.href=`#${id}`;
      }

      function renderGraph(year){
        var world_map_data = {
          "autosize":{
              "type":"fit",
              "resize":true
          },
          "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
            "title":`Average Price of 1GB of Data in the World ${year}`,
            "width":550,
            "height":300,
            "projection":{
                "type":"equalEarth"
            },
            "layer":[
                {
                    "data":{
                        "graticule":{
                            "step":[
                                10,
                                10
                            ]
                        }
                    },
                    "mark":{
                        "type":"geoshape",
                        "stroke":"lightgrey"
                    }
                },
                {
                    "data":{
                        "url":"https://raw.githubusercontent.com/lelemegan/Assignment-2/main/ne_110m_admin_0_countries.topojson.txt",
                        "format":{
                            "type":"topojson",
                            "feature":"ne_110m_admin_0_countries"
                        }
                    },
                    "transform":[
                        {
                            "calculate":"'Data is not available in ' + datum.properties.NAME",
                            "as":"note"
                        }
                    ],
                    "mark":{
                        "type":"geoshape",
                        "fill":"#B7B69D",
                        "stroke":"white",
                        "strokeWidth":1
                    },
                    "encoding":{
                        "tooltip":{
                            "field":"note"
                        }
                    }
                },
                {
                    "data":{
                        "url":"https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                    },
                    "transform":[
                    {"calculate": "toNumber(datum.Average_Price)", "as": "Average_Price"},
                        {
                            "lookup":"Name",
                            "from":{
                                "data":{
                                    "url":"https://raw.githubusercontent.com/lelemegan/Assignment-2/main/ne_110m_admin_0_countries.topojson.txt",
                                    "format":{
                                        "type":"topojson",
                                        "feature":"ne_110m_admin_0_countries"
                                    }
                                },
                                "key":"properties.NAME"
                            },
                            "as":"geo"
                        },
                        {
                            "filter":`datum.Year == ${year}`
                        }
                    ],
                    "mark":{
                        "type":"geoshape",
                        "stroke":"#fff",
                        "strokeWidth":0.5
                    },
                    "encoding":{
                        "shape":{
                            "field":"geo",
                            "type":"geojson"
                        },
                        "color":{
                            "field":"Average_Price",
                            "type":"quantitative",
                            "scale":{
                                "type":"quantile",
                                "domain":[
                                    1,
                                    3,
                                    5,
                                    7,
                                    9
                                ],
                                "range":[
                                    "#D6DFFF", 
                                    "#B6C5F8", 
                                    "#91A5E9", 
                                    "#677FD6", 
                                    "#455BC4", 
                                    "#283AB5", 
                                    "#0B1BA5", 
                                    "#0B148B", 
                                    "#0B0C71"
                                ]
                            },
                            "legend":{
                                "format":".1f",
                                "title": "Average Price (in USD)"
                            }
                        },
                        "tooltip":[
                            {
                                "field":"Name",
                                "type":"nominal",
                                "title":"Country"
                            },
                            {
                                "field":"Continental region",
                                "type":"nominal",
                                "title":"Continent"
                            },
                            {
                                "field":"Average_Price",
                                "type":"quantitative",
                                "title":"Average Price (in USD)",
                                "format":","
                            },
                            {
                                "field":"Year",
                                "type":"quantitative",
                                "title":"Year"
                            }
                        ]
                    }
                }],
          "config":{}};
          
        var top_low_price_data = 
                            {
                    "hconcat": [
                        {
                        "title": "Average Lowest Price of 1GB of Data",
                        "width": 150,
                        "data": {
                            "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                        },
                        "transform": [
                            {"calculate": "toNumber(datum.Average_Price)", "as": "Average_Price_Num"},
                            {"filter": `datum.Year == ${year} & datum.Average_Price_Num>0`},
                            {
                            "window": [{"op": "rank", "as": "rank"}],
                            "sort": [{"field": "Average_Price_Num", "order": "ascending"}]
                            },
                            {"filter": "datum.rank <=5"}
                        ],
                        "mark": {"type": "bar", "cornerRadiusEnd": 4},
                        "encoding": {
                            "x": {
                            "field": "Name",
                            "title": "Country",
                            "type": "nominal",
                            "sort": {"field": "Average_Price_Num", "order": "ascending"}
                            },
                            "y": {
                            "field": "Average_Price_Num",
                            "title": "Average Price (in USD)",
                            "type": "quantitative"
                            },
                        "tooltip": [
                        {"field": "Name", "type": "ordinal", "title": "Country"},
                        {"field": "Average_Price_Num", "type": "quantitative", "title": "Average Price (in USD)"},
                        {"field": "Year", "type": "quantitative", "title": "Year"}],
                            "color": {"value": "#D6DFFF"}
                        }
                        },
                        {
                        "title": "Average Most Expensive Price of 1GB of Data",
                        "width": 150,
                        "data": {
                            "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                        },
                        "transform": [
                            {"calculate": "toNumber(datum.Average_Price)", "as": "Average_Price_Num"},
                            {"filter": `datum.Year == ${year} & datum.Average_Price_Num>0`},
                            {
                            "window": [{"op": "rank", "as": "rank"}],
                            "sort": [{"field": "Average_Price_Num", "order": "descending"}]
                            },
                            {"filter": "datum.rank <=5"}
                        ],
                        "mark": {"type": "bar", "cornerRadiusEnd": 4},
                        "encoding": {
                            "x": {
                            "field": "Name",
                            "title": "Country",
                            "type": "nominal",
                            "sort": {"field": "Average_Price_Num", "order": "descending"}
                            },
                            "y": {
                            "field": "Average_Price_Num",
                            "title": "Average Price (in USD)",
                            "type": "quantitative"
                            },
                        "tooltip": [
                        {"field": "Name", "type": "ordinal", "title": "Country"},
                        {"field": "Average_Price_Num", "type": "quantitative", "title": "Average Price (in USD)"},
                        {"field": "Year", "type": "quantitative", "title": "Year"}],
                            "color": {"value": "#0B0C71"}
                        }
                        }
                    ]
                    };
        
        var average_price_data = {
            "title": "Average Lowest and Highest Price of 1GB of Data",
            "width": 300,
            "height": 300,
            "background": "#f1f1f1",
            "data": {
                "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
            },
            "layer": [
                {
                    "transform": [
                        {
                            "calculate": "toNumber(datum.Average_Price)",
                            "as": "Average_Price_Num"
                        },
                        {
                            "filter": `datum.Year == ${year} & datum.Average_Price_Num>0`
                        },
                        {
                            "window": [
                                {
                                    "op": "rank",
                                    "as": "rank"
                                }
                            ],
                            "sort": [
                                {
                                    "field": "Average_Price_Num",
                                    "order": "ascending"
                                }
                            ]
                        },
    {"joinaggregate": [{"op": "max", "field": "rank", "as": "total"}]},
                        {
                            "filter": "datum.rank <=5 || (datum.rank > datum.total - 5)"
                        }
                    ],
                    "encoding": {
                        "x": {
                            "field": "Name",
                            "title": "Country",
                            "type": "nominal",
                            "sort": {
                                "field": "Average_Price_Num",
                                "order": "ascending"
                            }
                        },
                        "y": {
                            "field": "Average_Price_Num",
                            "title": "Average Price (in USD)",
                            "type": "quantitative",
                            "stack": null
                        },
                        "tooltip": [
                            {
                                "field": "Name",
                                "type": "ordinal",
                                "title": "Country"
                            },
                            {
                                "field": "Average_Price_Num",
                                "type": "quantitative",
                                "title": "Average Price (in USD)"
                            },
                            {
                                "field": "Year",
                                "type": "quantitative",
                                "title": "Year"
                            }
                        ],
                        "color": {
                          "field": "Average_Price_Num",
                          "scale":{
                                "type":"threshold",
                                "domain":[
                                    8
                                ],
                                "range":[
                                    "#D6DFFF", 
                                    "#0B0C71"
                                ]
                            },
                                "legend": null
                        },
                    },
                    "layer": [
                        {
                            "mark": {
                                "type": "bar",
                                "cornerRadiusEnd": 4
                            }   
                        }, 
                        {
                            "mark": {
                                "type": "text",
                                "align": "center",
                                "baseline": "bottom"
                                
                            },
                            
                            "encoding": {
                                "text": {"field": "Average_Price_Num", "type": "quantitative", "format": ".2f"}
                        }
                    }]
                },
                {
                    "transform": [
                        {
                            "calculate": "toNumber(datum.Average_Price)",
                            "as": "Average_Price_Num"
                        },
                        {
                            "filter": `datum.Year == ${year} & datum.Average_Price_Num>0`
                        }
                    ],
                    "layer": [
                      {
                        "mark": {
                          "type": "rule",
                          "color": "red"
                        }
                      },
                      {
                        "transform": [
                          
                          {
                            "calculate": "'Average price ;of the year is: ' ",
                            "as": "text_annotation_raw"
                          },
                          {
                            "calculate": "split(datum.text_annotation_raw, ';')",
                            "as": "text_annotation"
                          }
                        ],
                        "layer":[
                        {
                          "mark": {
                            "type": "text",
                            "align": "left",
                            "baseline": "bottom",
                            "dx": 160
                          },
                          "encoding": {
                            "text": {
                                "field": "text_annotation"
                              }
                          }
                        },
                        {
                          "mark": {
                            "type": "text",
                            "align": "right",
                            "baseline": "middle",
                            "dx": 255
                          },
                          "encoding": {
                            "text": {
                                "aggregate": "average",
                                "field": "Average_Price_Num",
                                "type": "quantitative","format": ".2f"
                              }
                          }
                        }
                          
                        ]
                        
                      }
                    ],
                    
                    "encoding": {
                        "y": {
                            "aggregate": "average",
                            "field": "Average_Price_Num",
                            "type": "quantitative"
                        },
                    "tooltip": [
                      {"aggregate": "average", "field": "Average_Price_Num", "type": "quantitative", "title": `Average of ${year} (in USD)`, "format": ".2f"}
                    ]
                    }
                }
            ]
        };
        
        document.getElementById("vis").innerHTML = "";
        vegaEmbed('#vis', world_map_data);
        document.getElementById("vis").innerHTML = "";
        vegaEmbed('#vis_b', top_low_price_data);
        document.getElementById("vis").innerHTML = "";
        vegaEmbed('#vis_c', average_price_data);
        // document.getElementById("first-para").innerHTML = "`$Year`";

        showDescriptionOfYear(year);

      }

      function showDescriptionOfYear(year){
        let years = [2019, 2020, 2021, 2022];
        for (let i = 0; i < years.length; i++){
            let y = years[i];
            let element = document.getElementById(`avg_price_description_${y}`);
            // let element2 = document.getElementById(`some_other_description_${y}`);
            // if this year is ment to be shown
            if (year === y){
                // show the year if match
                element.style["display"] = "";
                // element2.style["display"] = "";
            }
            else {
                // hide
                element.style["display"] = "none";
                // element2.style["display"] = "none";
            }
        }
      }
      
      renderGraph(2022);

      var Number_Of_Internet_Users_Vis = {
  "data": {
    "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/number-of-internet-users-by-country.csv"
  },
  "vconcat": [
    {
      "title": "Number of Internet Users in the World",
      "width": 600,
      "layer": [
            {
              "transform": [
            {
              "filter": {
                "field": "Country_Name",
                "oneOf": [
                  "North America",
                  "Europe",
                  "Africa",
                  "South America",
                  "Australia",
                  "Asia"
                ]
              }
            }
          ],
          "mark": "area",
          "encoding": {
            "x": {
              "timeUnit": "year", 
              "field": "Year",
              "type": "temporal",
              "scale": {"domain": {"param": "time_brush"}},
              "title": "Year"
            },
            "y": {
              "field": "No_Of_Internet_Users",
              "type": "quantitative",
              "title": "Number of Internet Users"
            },
            "color": {
              "field": "Country_Name",
              "type": "nominal",
              "title": "Continental Region",
              "scale": {"domain": [
                  "Africa",
                  "Asia",
                  "Australia",
                  "Europe",
                  "North America",
                  "South America",
                  "World"], 
              "range": [
                "#FFF6D6", 
                "#FFD6D6",
                "#D6DFFF",
                "#D6FFD8",
                "#E8D6FF",
                "#D6FDFF",
                "#fd7f6f"]}
            },
            "tooltip": [
              {
                "field": "Country_Name",
                "type": "nominal",
                "title": "Continental Region"
              },
              {
                "field": "No_Of_Internet_Users",
                "type": "quantitative",
                "title": "Number of Internet Users",
                "format": ","
              }
            ]
          }
        }
      ]
          
        
        
      
    },
    {
      "transform": [{"filter": "datum.Country_Name=='World'"}],
      "width": 600,
      "height": 50,
      "layer": [
        {
          "mark": "line",
      "params": [
        {
          "name": "time_brush",
          "select": {"type": "interval", "encodings": ["x"]}
        }
      ],
      "encoding": {
        "x": {
            "field": "Year", 
            "type": "temporal",
            "timeUnit": "year",
            "title": "Year"},
        "y": {
          "field": "No_Of_Internet_Users",
          "type": "quantitative",
          "title": "Number of Internet Users"
        },
        "color": {"field": "Country_Name", "type": "nominal"}
      }
        },
        {
          "layer": [
            {
              "mark": { 
                "type": "rule", 
                "color": "#D67878", 
                "size": 2
              },
              "encoding": {
                "x": { "field": "date", "type": "temporal"}
              },
              "data": {
                "values": [
                  {"date": "1991"},
                  {"date": "1996"},
                  {"date": "2007"}
                ],
                "format": {
                  "parse": {"date": "utc:'%Y'"}
                }
              }
            },
            {
              "transform": [
                {
                  "calculate": "'1990:; Webpage go live' ",
                  "as": "first_text_annotation_raw"
                },
                {
                  "calculate": "split(datum.first_text_annotation_raw, ';')",
                  "as": "first_text_annotation"
                },
                {
                  "calculate": "'1996:; Wi-Fi invented' ",
                  "as": "second_text_annotation_raw"
                },
                {
                  "calculate": "split(datum.second_text_annotation_raw, ';')",
                  "as": "second_text_annotation"
                },
                {
                  "calculate": "'2007:; iPhone launched' ",
                  "as": "third_text_annotation_raw"
                },
                {
                  "calculate": "split(datum.third_text_annotation_raw, ';')",
                  "as": "third_text_annotation"
                }
              ],
              "layer": [
                {
                  "mark": {
                    "type": "text",
                    "align": "left",
                    "baseline": "top",
                    "dx": -310,
                    "dy": -50,
                    "fontStyle": "italic",
                    "fontSize": 9,
                    "color": "#D67878"
                  },
                  "encoding": {
                    "text": {"field": "first_text_annotation"}
                  }
                },
                {
                  "mark": {
                    "type": "text",
                    "align": "left",
                    "baseline": "top",
                    "dx": -210,
                    "dy": -50,
                    "fontStyle": "italic",
                    "fontSize": 9,
                    "color": "#D67878"
                  },
                  "encoding": {
                    "text": {"field": "second_text_annotation"}
                  }
                },
                {
                  "mark": {
                    "type": "text",
                    "align": "left",
                    "baseline": "top",
                    "dx": 10,
                    "dy": -50,
                    "fontStyle": "italic",
                    "fontSize": 9,
                    "color": "#D67878"
                  },
                  "encoding": {
                    "text": {"field": "third_text_annotation"}
                  }
                }
              ]
            }
          ]
        }
      ]
      
    }
  ]
};
      vegaEmbed('#vis2', Number_Of_Internet_Users_Vis);

      var Number_Of_Internet_Users_Vis_2 = {
                                            "height": 250,
                                            "width": 600,
                                            "background": "#f1f1f1",
                                            "data": { "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/statistic_id262966_countries-with-the-highest-number-of-internet-users-2022.csv"},
                                            "title": "Top 10 Countries with Highest Number of Internet Users in 2022 (as of July)",
                                            "transform": [
                                                    {
                                                    "calculate": "toNumber(datum['No_Internet Users'])",
                                                    "as": "No_Internet Users"
                                                    },
                                                    {"filter": "datum['No_Internet Users']>0"}
                                                ],
                                            "mark": "bar",
                                            "encoding": {
                                                "y": {"field": "Country", "sort": {"field": "No_Internet Users", "order": "descending"}},
                                                "x": {
                                                "aggregate": "sum", "field": "No_Internet Users",
                                                "title": "Number of Internet Users"
                                                },
                                                    "tooltip": [
                                                    {
                                                        "field": "Country", 
                                                        "type": "ordinal", 
                                                        "title": "Country"
                                                    },
                                                    {
                                                        "field": "No_Internet Users",
                                                        "type": "quantitative",
                                                        "title": "Number of Internet Users",
                                                        "format": ","
                                                    }
                                                    ],
                                                    "color": {"value": "#0B0C71"}
                                            }
                                            };
                                            vegaEmbed('#vis2_b', Number_Of_Internet_Users_Vis_2);

      var yourV3Spec = {
  "data": {
    "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Internet%20Users%20Dataset.csv"
  },
  "vconcat": [
    {
      
      "title": "Percentage of Internet Users in the World",
      "transform": [
        {
          "calculate": "toNumber(datum.Users_Percentage)",
          "as": "User_Percentage"
        },
        {
          "filter": {
            "field": "Country_Name",
            "oneOf": [
              "North America",
              "Europe & Central Asia",
              "Middle East & North Africa",
              "Latin America & Caribbean",
              "East Asia & Pacific",
              "South Asia",
              "Sub-Saharan Africa"
            ]
          }
        }
      ],
      "width": 300,
      "height": 150,
      "mark": "line",
      "encoding": {
        "x": {
          "field": "Year",
          "type": "temporal",
          "scale": {"domain": {"param": "time_brush"}}
        }},
      "layer": [
        {
          "encoding": {
            "y": {
              "field": "Users_Percentage", 
              "type": "quantitative",
              "title": "% of Internet Users"
            },
            "color": {"field": "Country_Name", "type": "nominal", "title": "Continental Region", "mark": "line"}
          },
          "layer": [
            {"mark": "line"},
            {"transform": [{"filter": {"param": "hover", "empty": false}}], "mark": "point"}
          ]
        },
        {
          "transform": [{"pivot": "Country_Name", "value": "User_Percentage", "groupby": ["Year"]}],
          "mark": "rule",
          "encoding": {
            "opacity": {
              "condition": {"value": 0.3, "param": "hover", "empty": false},
              "value": 0
            },

            "tooltip": [
            {"field": "Year", "type": "temporal", "timeUnit": "year", "title": "Year"},
              {"field": "North America", "type": "quantitative", "format": ".2f"},
              {"field": "Europe & Central Asia", "type": "quantitative", "format": ".2f"},
              {"field": "Middle East & North Africa", "type": "quantitative", "format": ".2f"},
              {"field": "Latin America & Caribbean", "type": "quantitative", "format": ".2f"},
              {"field": "East Asia & Pacific", "type": "quantitative", "format": ".2f"},
              {"field": "South Asia", "type": "quantitative", "format": ".2f"},
              {"field": "Sub-Saharan Africa", "type": "quantitative", "format": ".2f"}
            ]
          },
          "params": [{
            "name": "hover",
            "select": {
              "type": "point",
              "fields": ["Year"],
              "nearest": true,
              "on": "mouseover",
              "clear": "mouseout"
            }
         }]
        
        }]
    },
    {
      "transform": [{"filter": "datum.Country_Name=='World'"}],
      "width": 300,
      "height": 50,
      "mark": "line",
      "params": [
        {
          "name": "time_brush",
          "select": {"type": "interval", "encodings": ["x"]}
        }
      ],
      "encoding": {
        "x": {"field": "Year", "type": "temporal"},
        "y": {
          "field": "Users_Percentage", 
          "type": "quantitative",
          "title": "% of Internet Users"
        },
        "color": {"field": "Country_Name", "type": "nominal"}
      }
    }
  ]
};
      vegaEmbed('#vis3', yourV3Spec);

        // collapsible
        var coll = document.getElementsByClassName("collapsible");
        var i;

        for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
            content.style.display = "none";
            } else {
            content.style.display = "block";
            }
        });
        }
    </script>
  </body>
</html>