<!DOCTYPE html>
<html>
  <head>
    <title>Embedding Vega-Lite</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
    <link rel="stylesheet" href="hi.css"> 
</head>
  <body>
    <div class="rectangle1">
        <div class="heading1">
            How much is 1GB of 
            data in the world?
        </div>
    </div>

    <div class="container">
        <div class="rectangle2" id="vis"></div>
    </div> 

    <div class="rectangle1">
        <div class="heading1">
            How much is 1GB of 
            data in the world?
        </div>
    </div>

    <div class="container">
        <div id="vis2"></div>
    </div> 

    <script type="text/javascript">
      var yourVlSpec = {
                        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                        "params": [
                            {
                            "name": "Year_selection",
                            "value": 2022,
                            "bind": {
                                "input": "range",
                                "min": 2019,
                                "max": 2022,
                                "step": 1,
                                "name": "Year:  "
                            }
                            },
                            {
                            "name": "zoom_level",
                            "value": 100,
                            "bind": {
                                "input": "range",
                                "min": 100,
                                "max": 500,
                                "step": 5,
                                "name": "Zoom: "
                            }
                            },
                            {
                            "name": "center_to",
                            "value": [
                                -250,
                                90
                            ],
                            "bind": {
                                "input": "select",
                                "options": [
                                [
                                    -250,
                                    90
                                ],
                                [
                                    144.3,
                                    -38.1
                                ],
                                [
                                    144.9,
                                    -36.7
                                ],
                                [
                                    147.1,
                                    -38.1
                                ]
                                ],
                                "labels": [
                                "Original",
                                "Geelong",
                                "Bendigo",
                                "Sale"
                                ],
                                "name": "Map Centre: "
                            }
                            }
                        ],
                        "hconcat": [
                            {
                            "title": "Average Price in the World (2019-2022)",
                            "width": 500,
                            "height": 300,
                            "projection": {
                                "type": "equalEarth",
                                "center": {
                                "expr": "center_to"
                                },
                                "scale": {
                                "expr": "zoom_level"
                                }
                            },
                            "layer": [
                                {
                                "data": {
                                    "url": "https://raw.githubusercontent.com/lelemegan/Assignment-2/main/ne_110m_admin_0_countries.topojson.txt",
                                    "format": {
                                    "type": "topojson",
                                    "feature": "ne_110m_admin_0_countries"
                                    }
                                },
                                "transform": [
                                    {
                                    "calculate": "'Data is not available in ' + datum.properties.NAME",
                                    "as": "note"
                                    }
                                ],
                                "mark": {
                                    "type": "geoshape",
                                    "fill": "#ddd",
                                    "stroke": "white",
                                    "strokeWidth": 1
                                },
                                "encoding": {
                                    "tooltip": {
                                    "field": "note"
                                    }
                                }
                                },
                                {
                                "data": {
                                    "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                                },
                                "transform": [
                                    {
                                    "lookup": "Name",
                                    "from": {
                                        "data": {
                                        "url": "https://raw.githubusercontent.com/lelemegan/Assignment-2/main/ne_110m_admin_0_countries.topojson.txt",
                                        "format": {
                                            "type": "topojson",
                                            "feature": "ne_110m_admin_0_countries"
                                        }
                                        },
                                        "key": "properties.NAME"
                                    },
                                    "as": "geo"
                                    },
                                    {
                                    "filter": "datum.Year == Year_selection"
                                    }
                                ],
                                "mark": {
                                    "type": "geoshape",
                                    "stroke": "#fff",
                                    "strokeWidth": 0.5
                                },
                                "encoding": {
                                    "shape": {
                                    "field": "geo",
                                    "type": "geojson"
                                    },
                                    "color": {
                                    "field": "Average_Price",
                                    "type": "quantitative",
                                    "scale": {
                                        "type": "threshold",
                                        "domain": [
                                        0.5,
                                        1,
                                        2,
                                        3,
                                        4,
                                        5,
                                        6,
                                        7,
                                        8,
                                        9,
                                        10
                                        ],
                                        "range": [
                                        "#c5cae9",
                                        "#9fa8da",
                                        "#7986cb",
                                        "#5c6bc0",
                                        "#3f51b5",
                                        "#3949ab"
                                        ]
                                    },
                                    "legend": {
                                        "format": ".2s"
                                    }
                                    },
                                    "tooltip": [
                                    {
                                        "field": "Continental region",
                                        "type": "nominal",
                                        "title": "Continent"
                                    },
                                    {
                                        "field": "Average_Price",
                                        "type": "quantitative",
                                        "title": "Average Price",
                                        "format": ","
                                    },
                                    {
                                        "field": "Year",
                                        "type": "quantitative",
                                        "title": "Year"
                                    }
                                    ]
                                }
                                }
                            ]
                            },
                            {
                            "title": "Average Price in the World (2019-2022)",
                            "data": {
                                "url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version1%20Price%20Dataset.csv"
                            },
                            "transform": [
                                {
                                "filter": "datum.Year == Year_selection & datum.Average_Price>0"
                                },
                                {
                                "window": [
                                    {
                                    "op": "rank",
                                    "as": "rank"
                                    }
                                ],
                                "sort": [
                                    {
                                    "field": "Average_Price",
                                    "order": "ascending"
                                    }
                                ]
                                },
                                {
                                "filter": "datum.rank <=5"
                                }
                            ],
                            "mark": "bar",
                            "encoding": {
                                "x": {
                                "field": "Name",
                                "type": "nominal",
                                "sort": {
                                    "field": "Average_Price",
                                    "order": "descending"
                                }
                                },
                                "y": {
                                "field": "Average_Price",
                                "type": "quantitative"
                                }
                            }
                            }
                        ],
                        "config": {}
                        };    
      vegaEmbed('#vis', yourVlSpec);

      var yourV2Spec = {"width": "container",
                        "title": "Dotplot",
                        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                        "description": "A ranged dot plot that uses 'layer' to convey changing life expectancy for the five most populous countries (between 1955 and 2000).",
                        "data": {"url": "https://raw.githubusercontent.com/lelemegan/lelemegan.github.io/main/Version3%20Price%20Dataset.csv"},
                        "transform": [{"filter": "datum.Year == 2022"},
                            {
                            "filter": {
                                "field": "Name",
                                "oneOf": ["China", "India", "United States", "Indonesia", "Brazil"]
                            }
                            },
                            {"filter": {"field": "Price_Category", "oneOf": ["Cheapest 1GB (USD)", "Most expensive 1GB (USD)", "Average 1GB (USD)"]}}
                        ],
                        "encoding": {
                            "x": {
                            "field": "Price",
                            "type": "quantitative",
                            "title": "Price"
                            },
                            "y": {
                            "field": "Name",
                            "type": "nominal",
                            "title": "Country",
                            "axis": {"offset": 5, "ticks": false, "minExtent": 70, "domain": false}
                            }
                        },
                        "layer": [
                            {
                            "mark": "line",
                            "encoding": {
                                "detail": {"field": "country", "type": "nominal"},
                                "color": {"value": "#db646f"}
                            }
                            },
                            {
                            "mark": {"type": "point", "filled": true},
                            "encoding": {
                                "color": {
                                "field": "Price_Category",
                                "type": "nominal",
                                "scale": {"domain": ["Cheapest 1GB (USD)", "Most expensive 1GB (USD)", "Average 1GB (USD)"], "range": ["#e6959c", "#911a24", "#FFFF90"]},
                                "title": "Price Category"
                                },
                                "size": {"value": 100},
                                "opacity": {"value": 1}
                            }
                            }
                        ]
                        };
      vegaEmbed('#vis2', yourV2Spec);
    </script>
  </body>
</html>